<?php
include('config.php'); // Inclui o arquivo de configuração do banco de dados

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    // Processar o formulário de pesquisa do professor
    $pesquisa = $_POST['pesquisa']; // Valor do campo de pesquisa
    // Consulta ao banco de dados para obter informações do aluno com base na pesquisa
    // Aqui você precisa adaptar a consulta de acordo com a estrutura do seu banco de dados
    // Supondo que você tenha uma tabela 'alunos' com as colunas 'nome', 'id', 'materia', etc.
    // Você precisará ajustar os nomes das colunas e a lógica da consulta conforme necessário

    // Exemplo de consulta
    $sql = "SELECT * FROM alunos WHERE nome LIKE '%$pesquisa%' OR id = '$pesquisa' OR materia LIKE '%$pesquisa%'";
    $result = $mysqli->query($sql);

    // Verifica se a consulta retornou algum resultado
    if ($result->num_rows > 0) {
        // Exibe os resultados da pesquisa
        echo "<h2>Resultados da Pesquisa:</h2>";
        while ($row = $result->fetch_assoc()) {
            // Exibe as informações do aluno encontrado
            echo "<p>Nome: " . $row['nome'] . "</p>";
            echo "<p>ID: " . $row['id'] . "</p>";
            echo "<p>Matéria: " . $row['materia'] . "</p>";
            // Adicione mais informações conforme necessário
            // Adicione campos de formulário apenas para atualização das informações
            echo "<form action='atualizar_aluno.php' method='post'>";
            echo "<input type='hidden' name='id_aluno' value='" . $row['id'] . "'>";
            echo "<label for='faltas'>Faltas:</label>";
            echo "<input type='number' name='faltas' value='" . $row['faltas'] . "'><br>";
            // Adicione mais campos de formulário para outras informações a serem atualizadas
            echo "<input type='submit' value='Atualizar'>";
            echo "</form>";
        }
    } else {
        // Se não houver resultados, exibe uma mensagem de erro
        echo "Nenhum aluno encontrado.";
    }
}
?>

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Professor</title>
    <!-- Adicione aqui suas folhas de estilo CSS -->
</head>
<body>
    <h1>Painel do Professor</h1>
    <h2>Pesquisar Aluno</h2>
    <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
        <label for="pesquisa">Pesquisar:</label>
        <input type="text" name="pesquisa" required>
        <input type="submit" value="Pesquisar">
    </form>
</body>
</html>
